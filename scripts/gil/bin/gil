#!/usr/bin/ruby
require File.dirname(__FILE__) + '/../lib/gil'

include Lighthouse
require 'optparse'

options = {}

OptionParser.new do |opts|
  opts.banner = "Usage: gil revision [options]\n"
  opts.on("-e", "--template ERB_TEMPLATE_PATH", :REQUIRED,
          "An erb template to use to format the output") do |template|
    options[:template] = template
  end
end.parse!

rev = ARGV[0]
gil = Gil.new(options)
tickets = gil.summarise_commits(rev)

tickets.each do |t|
  puts "##{t.number} - #{t.title}"
end
